{"version":3,"sources":["webpack://mesto/./src/scripts/components/Card.js","webpack://mesto/./src/scripts/components/FormValidator.js","webpack://mesto/./src/scripts/components/Section.js","webpack://mesto/./src/scripts/components/Popup.js","webpack://mesto/./src/scripts/components/PopupWithForm.js","webpack://mesto/./src/scripts/components/PopupWithImage.js","webpack://mesto/./src/scripts/components/UserInfo.js","webpack://mesto/./src/scripts/components/Api.js","webpack://mesto/./src/scripts/components/PopupWithConfirm.js","webpack://mesto/./src/pages/index.js"],"names":["data","templateSelector","handleCardClick","handleRemoveButton","makeLikeRequest","currentUserId","this","_name","name","_link","link","_ownerId","owner","_id","_likes","Array","from","likes","_templateSelector","_handleCardClick","_handleRemoveButton","_makeLikeRequest","_currentUserId","_handleCardLike","bind","_element","_getTemplate","_title","querySelector","_image","_like","_likeCounter","_removeButton","src","alt","textContent","length","isLiked","classList","add","_deleteRemoveButton","_setEventListeners","remove","some","user","then","card","addEventListener","document","content","cloneNode","FormValidator","settings","form","_inputSelector","inputSelector","_submitButtonSelector","submitButtonSelector","_inactiveButtonClass","inactiveButtonClass","_inputErrorClass","inputErrorClass","_errorClass","errorClass","_form","_inputList","querySelectorAll","_buttonElement","buttonElement","disabled","inputList","forEach","inputElement","_hideInputError","_checkInputValidity","_toggleButtonState","validity","valid","_showInputError","validationMessage","input","_hasInvalidInput","errorMessage","errorElement","id","Section","containerSelector","renderer","_renderer","_container","items","item","append","prepend","Popup","popupSelector","_popup","_closeButton","_handleEscClose","_handleOverlayClick","removeEventListener","close","event","key","target","contains","PopupWithForm","handleFormSubmit","_handleFormSubmit","_inputs","_saveButton","_getInputValues","reset","values","value","PopupWithImage","_popupImage","_imageCaption","imageData","UserInfo","usernameSelector","statusSelector","avatarSelector","_usernameElement","_statusElement","_avatar","username","status","userData","about","setUserAvatar","avatar","Api","options","_baseUrl","baseUrl","_headers","headers","fetch","_checkResponse","method","body","JSON","stringify","cardData","res","ok","json","Promise","reject","PopupWithConfirm","_confirmButton","handleDelete","_handleDelete","preventDefault","api","authorization","initialPromises","getUserInfo","getInitialCards","userInfo","cardPopup","formValues","saveButton","renderLoading","addCard","cardElement","createCard","cardsList","addItem","catch","handleError","finally","profilePopup","editUserInfo","responseData","setUserInfo","avatarPopup","editUserAvatar","imagePopup","confirmPopup","cardPopupForm","getFormElement","profilePopupForm","avatarPopupForm","profileEditButton","profileAddButton","profileAvatar","formSelector","cardFormValidator","profileFormValidator","avatarFormValidator","profileNameInput","profileStatusInput","addInitialItem","err","console","log","open","deleteCard","getId","delete","deleteCardLike","addCardLike","myId","getUserId","Card","create","isLoading","button","prepareForm","formValidator","prepareInputs","disableButton","enableValidation","setEventListeners","all","initialCards","renderItems"],"mappings":"yLA4FA,Q,WA3FE,cAA2G,IAA9FA,EAA8F,EAA9FA,KAAMC,EAAwF,EAAxFA,iBAAkBC,EAAsE,EAAtEA,gBAAiBC,EAAqD,EAArDA,mBAAoBC,EAAiC,EAAjCA,gBAAiBC,EAAgB,EAAhBA,e,4FAAgB,SACzGC,KAAKC,MAAQP,EAAKQ,KAClBF,KAAKG,MAAQT,EAAKU,KAClBJ,KAAKK,SAAWX,EAAKY,MAAMC,IAC3BP,KAAKO,IAAMb,EAAKa,IAChBP,KAAKQ,OAASC,MAAMC,KAAKhB,EAAKiB,OAE9BX,KAAKY,kBAAoBjB,EACzBK,KAAKa,iBAAmBjB,EACxBI,KAAKc,oBAAsBjB,EAC3BG,KAAKe,iBAAmBjB,EACxBE,KAAKgB,eAAiBjB,EAEtBC,KAAKiB,gBAAkBjB,KAAKiB,gBAAgBC,KAAKlB,M,2CAGnD,WAuBE,OAtBAA,KAAKmB,SAAWnB,KAAKoB,eACrBpB,KAAKqB,OAASrB,KAAKmB,SAASG,cAAc,gBAC1CtB,KAAKuB,OAASvB,KAAKmB,SAASG,cAAc,gBAC1CtB,KAAKwB,MAAQxB,KAAKmB,SAASG,cAAc,eACzCtB,KAAKyB,aAAezB,KAAKmB,SAASG,cAAc,uBAChDtB,KAAK0B,cAAgB1B,KAAKmB,SAASG,cAAc,iBAEjDtB,KAAKuB,OAAOI,IAAM3B,KAAKG,MACvBH,KAAKuB,OAAOK,IAAM5B,KAAKC,MACvBD,KAAKqB,OAAOQ,YAAc7B,KAAKC,MAC/BD,KAAKyB,aAAaI,YAAc7B,KAAKQ,OAAOsB,OAExC9B,KAAK+B,WACP/B,KAAKwB,MAAMQ,UAAUC,IAAI,qBAGvBjC,KAAKK,WAAaL,KAAKgB,gBACzBhB,KAAKkC,sBAGPlC,KAAKmC,qBAEEnC,KAAKmB,W,oBAGd,WACEnB,KAAKmB,SAASiB,W,mBAGhB,WACE,OAAOpC,KAAKO,M,qBAGd,WAAU,WACR,OAAOP,KAAKQ,OAAO6B,MAAK,SAAAC,GAAI,OAAIA,EAAK/B,MAAQ,EAAKS,oB,6BAGpD,WAAkB,WAChBhB,KAAKe,iBAAiBf,MACnBuC,MAAK,SAACC,GACL,EAAKhC,OAASgC,EAAK7B,MACnB,EAAKc,aAAaI,YAAc,EAAKrB,OAAOsB,OACxC,EAAKC,UACP,EAAKP,MAAMQ,UAAUC,IAAI,qBAEzB,EAAKT,MAAMQ,UAAUI,OAAO,0B,iCAKpC,WACEpC,KAAK0B,cAAcU,W,gCAGrB,WAAqB,WACnBpC,KAAKuB,OAAOkB,iBAAiB,SAAS,kBAAM,EAAK5B,iBAAiB,CAChEX,KAAM,EAAKD,MACXG,KAAM,EAAKD,WAEbH,KAAKwB,MAAMiB,iBAAiB,QAASzC,KAAKiB,gBAAgBC,KAAKlB,OAC/DA,KAAK0B,cAAce,iBAAiB,SAAS,kBAAM,EAAK3B,oBAAoB,Q,0BAG9E,WAOE,OANoB4B,SACjBpB,cAActB,KAAKY,mBACnB+B,QACArB,cAAc,SACdsB,WAAU,Q,gMCtFIC,E,WACnB,WAAYC,EAAUC,I,4FAAM,SAC1B/C,KAAKgD,eAAiBF,EAASG,cAC/BjD,KAAKkD,sBAAwBJ,EAASK,qBACtCnD,KAAKoD,qBAAuBN,EAASO,oBACrCrD,KAAKsD,iBAAmBR,EAASS,gBACjCvD,KAAKwD,YAAcV,EAASW,WAC5BzD,KAAK0D,MAAQX,EACb/C,KAAK2D,WAAalD,MAAMC,KAAKV,KAAK0D,MAAME,iBAAiB5D,KAAKgD,iBAC9DhD,KAAK6D,eAAiB7D,KAAK0D,MAAMpC,cAActB,KAAKkD,uB,qDAGtD,WACElD,KAAKmC,uB,2BAGP,SAAc2B,GACZ9D,KAAK6D,eAAe7B,UAAUC,IAAIjC,KAAKoD,sBACvCpD,KAAK6D,eAAeE,UAAW,I,2BAGjC,SAAcC,GAAW,WACvBhE,KAAK2D,WAAWM,SAAQ,SAACC,GAAD,OAAkB,EAAKC,gBAAgBD,Q,gCAGjE,WAAqB,WACnBlE,KAAK2D,WAAWM,SAAQ,SAACC,GACvBA,EAAazB,iBAAiB,SAAS,WACrC,EAAK2B,oBAAoBF,GACzB,EAAKG,6B,iCAKX,SAAoBH,GACbA,EAAaI,SAASC,MAGzBvE,KAAKmE,gBAAgBD,GAFrBlE,KAAKwE,gBAAgBN,EAAcA,EAAaO,qB,8BAMpD,WACE,OAAOzE,KAAK2D,WAAWtB,MAAK,SAAAqC,GAAK,OAAKA,EAAMJ,SAASC,W,gCAGvD,WACMvE,KAAK2E,oBACP3E,KAAK6D,eAAe7B,UAAUC,IAAIjC,KAAKoD,sBACvCpD,KAAK6D,eAAeE,UAAW,IAE/B/D,KAAK6D,eAAe7B,UAAUI,OAAOpC,KAAKoD,sBAC1CpD,KAAK6D,eAAeE,UAAW,K,6BAInC,SAAgBG,EAAcU,GAC5B,IAAMC,EAAe7E,KAAK0D,MAAMpC,cAAX,WAA6B4C,EAAaY,GAA1C,WAErBZ,EAAalC,UAAUC,IAAIjC,KAAKsD,kBAChCuB,EAAahD,YAAc+C,I,6BAG7B,SAAgBV,GACd,IAAMW,EAAe7E,KAAK0D,MAAMpC,cAAX,WAA6B4C,EAAaY,GAA1C,WAErBZ,EAAalC,UAAUI,OAAOpC,KAAKsD,kBACnCuB,EAAahD,YAAc,Q,gMCnEVkD,E,WACnB,aAAyBC,GAAmB,IAA/BC,EAA+B,EAA/BA,U,4FAA+B,SAC1CjF,KAAKkF,UAAYD,EACjBjF,KAAKmF,WAAazC,SAASpB,cAAc0D,G,gDAG3C,SAAYI,GAAO,WACjBA,EAAMnB,SAAQ,SAAAoB,GACZ,EAAKH,UAAUG,Q,4BAInB,SAAeA,GACbrF,KAAKmF,WAAWG,OAAOD,K,qBAGzB,SAAQA,GACNrF,KAAKmF,WAAWI,QAAQF,Q,gMCjBPG,E,WACnB,WAAYC,I,4FAAe,SACzBzF,KAAK0F,OAAShD,SAASpB,cAAcmE,GACrCzF,KAAK2F,aAAe3F,KAAK0F,OAAOpE,cAAc,wBAC9CtB,KAAK4F,gBAAkB5F,KAAK4F,gBAAgB1E,KAAKlB,MACjDA,KAAK6F,oBAAsB7F,KAAK6F,oBAAoB3E,KAAKlB,M,yCAG3D,WACEA,KAAK0F,OAAO1D,UAAUC,IAAI,gBAC1BjC,KAAK0F,OAAOjD,iBAAiB,QAASzC,KAAK6F,qBAC3CnD,SAASD,iBAAiB,UAAWzC,KAAK4F,mB,mBAG5C,WACE5F,KAAK0F,OAAO1D,UAAUI,OAAO,gBAC7BpC,KAAK0F,OAAOI,oBAAoB,QAAS9F,KAAK6F,qBAC9CnD,SAASoD,oBAAoB,UAAW9F,KAAK4F,mB,+BAG/C,WAAoB,WAClB5F,KAAK2F,aAAalD,iBAAiB,SAAS,kBAAM,EAAKsD,a,6BAGzD,SAAgBC,GACI,WAAdA,EAAMC,KAAkBjG,KAAK+F,U,iCAGnC,SAAoBC,GACfA,EAAME,OAAOlE,UAAUmE,SAAS,UAAUnG,KAAK+F,a,2mCC3BjCK,E,upBACnB,WAAYX,EAAeY,GAAkB,a,4FAAA,UAC3C,cAAMZ,IACDa,kBAAoBD,EAAiBnF,KAAjB,MACzB,EAAKwC,MAAQ,EAAKgC,OAAOpE,cAAc,gBACvC,EAAKiF,QAAU,EAAK7C,MAAME,iBAAiB,SAC3C,EAAK4C,YAAc,EAAK9C,MAAMpC,cAAc,uBALD,E,8CAQ7C,WAAoB,WAClB,sDACAtB,KAAK0D,MAAMjB,iBAAiB,UAAU,SAACuD,GAAD,OAAW,EAAKM,kBAAkBN,EAAO,EAAKS,kBAAmB,EAAKD,kB,mBAG9G,WACE,0CACAxG,KAAK0D,MAAMgD,U,4BAGb,WACE,OAAO1G,KAAK0D,Q,6BAGd,WACE,IAAMiD,EAAS,GAGf,OAFA3G,KAAKuG,QAAQtC,SAAQ,SAAAS,GAAK,OAAIiC,EAAOjC,EAAMxE,MAAQwE,EAAMkC,SAElDD,O,oBA3BgCnB,G,klCCAtBqB,E,upBACnB,WAAYpB,GAAe,a,4FAAA,UACzB,cAAMA,IACDqB,YAAc,EAAKpB,OAAOpE,cAAc,iBAC7C,EAAKyF,cAAgB,EAAKrB,OAAOpE,cAAc,mBAHtB,E,iCAM3B,SAAK0F,GACHhH,KAAK8G,YAAYnF,IAAMqF,EAAU5G,KACjCJ,KAAK8G,YAAYlF,IAAMoF,EAAU9G,KACjCF,KAAK+G,cAAclF,YAAcmF,EAAU9G,KAC3C,8C,oBAXwCsF,G,0KCFvByB,E,WACnB,cAAgE,IAAnDC,EAAmD,EAAnDA,iBAAkBC,EAAiC,EAAjCA,eAAgBC,EAAiB,EAAjBA,gB,4FAAiB,SAC9DpH,KAAKqH,iBAAmB3E,SAASpB,cAAc4F,GAC/ClH,KAAKsH,eAAiB5E,SAASpB,cAAc6F,GAC7CnH,KAAKuH,QAAU7E,SAASpB,cAAc8F,G,gDAGxC,WACE,MAAO,CACLI,SAAUxH,KAAKqH,iBAAiBxF,YAChC4F,OAAQzH,KAAKsH,eAAezF,e,uBAIhC,WACE,OAAO7B,KAAKO,M,yBAGd,SAAYmH,GACV1H,KAAKO,IAAMmH,EAASnH,IACpBP,KAAKqH,iBAAiBxF,YAAc6F,EAASxH,KAC7CF,KAAKsH,eAAezF,YAAc6F,EAASC,MAC3C3H,KAAK4H,cAAcF,EAASG,U,2BAG9B,SAAczH,GACZJ,KAAKuH,QAAQ5F,IAAMvB,O,4LC1BhB,IAAM0H,EAAb,WACE,WAAYC,I,4FAAS,SACnB/H,KAAKgI,SAAWD,EAAQE,QACxBjI,KAAKkI,SAAWH,EAAQI,Q,QAH5B,O,EAAA,G,EAAA,8BAME,WACE,OAAOC,MAAM,GAAD,OAAIpI,KAAKgI,SAAT,UAA2B,CACrCG,QAASnI,KAAKkI,WAEb3F,KAAKvC,KAAKqI,kBAVjB,yBAaE,WACE,OAAOD,MAAM,GAAD,OAAIpI,KAAKgI,SAAT,aAA8B,CACxCG,QAASnI,KAAKkI,WAEb3F,KAAKvC,KAAKqI,kBAjBjB,0BAoBE,SAAaX,GACX,OAAOU,MAAM,GAAD,OAAIpI,KAAKgI,SAAT,aAA8B,CACxCM,OAAQ,QACRH,QAASnI,KAAKkI,SACdK,KAAMC,KAAKC,UAAU,CACnBvI,KAAMwH,EAASxH,KACfyH,MAAOD,EAASC,UAGjBpF,KAAKvC,KAAKqI,kBA7BjB,4BAgCE,SAAejI,GACb,OAAOgI,MAAM,GAAD,OAAIpI,KAAKgI,SAAT,oBAAqC,CAC/CM,OAAQ,QACRH,QAASnI,KAAKkI,SACdK,KAAMC,KAAKC,UAAU,CACnBZ,OAAQzH,MAGTmC,KAAKvC,KAAKqI,kBAxCjB,qBA2CE,SAAQK,GACN,OAAON,MAAM,GAAD,OAAIpI,KAAKgI,SAAT,UAA2B,CACrCM,OAAQ,OACRH,QAASnI,KAAKkI,SACdK,KAAMC,KAAKC,UAAU,CACnBvI,KAAMwI,EAASxI,KACfE,KAAMsI,EAAStI,SAGlBmC,KAAKvC,KAAKqI,kBApDf,wBAuDE,SAAWvD,GACT,OAAOsD,MAAM,GAAD,OAAIpI,KAAKgI,SAAT,kBAA2BlD,GAAM,CAC3CwD,OAAQ,SACRH,QAASnI,KAAKkI,WAEf3F,KAAKvC,KAAKqI,kBA5Df,yBA+DE,SAAYvD,GACV,OAAOsD,MAAM,GAAD,OAAIpI,KAAKgI,SAAT,wBAAiClD,GAAM,CACjDwD,OAAQ,MACRH,QAASnI,KAAKkI,WAEf3F,KAAKvC,KAAKqI,kBApEf,4BAuEE,SAAevD,GACb,OAAOsD,MAAM,GAAD,OAAIpI,KAAKgI,SAAT,wBAAiClD,GAAM,CACjDwD,OAAQ,SACRH,QAASnI,KAAKkI,WAEf3F,KAAKvC,KAAKqI,kBA5Ef,4BA+EE,SAAeM,GACb,OAAIA,EAAIC,GACCD,EAAIE,OAGNC,QAAQC,OAAR,kBAA0BJ,EAAIlB,c,iBApFzC,K,klCCEqBuB,E,upBACnB,WAAYvD,GAAe,a,4FAAA,UACzB,cAAMA,IACDwD,eAAiBvG,SAASpB,cAAc,0BAFpB,E,iCAK3B,SAAK4H,GACHlJ,KAAKmJ,cAAgBD,EACrB,2C,+BAGF,WAAoB,WAClB,sDAEAlJ,KAAKiJ,eAAexG,iBAAiB,SAAS,SAACuD,GAC7CA,EAAMoD,iBACN,EAAKD,wB,oBAhBmC3D,G,0GCQ9C,IAAM6D,EAAM,IAAIvB,EAAI,CAClBG,QAAS,8CACTE,QAAS,CACPmB,cAAe,uCACf,eAAgB,sBAIdC,EAAkB,CAACF,EAAIG,cAAeH,EAAII,mBAE1CC,EAAW,IAAIzC,EAAS,CAC5BC,iBAAkB,iBAClBC,eAAgB,mBAChBC,eAAgB,qBAGZuC,EAAY,IAAIvD,EAAc,wBAwFpC,SAAwBJ,EAAO4D,EAAYC,GACzC7D,EAAMoD,iBACNU,IAAc,EAAMD,GACpBR,EAAIU,QAAQH,GACTrH,MAAK,SAACmG,GACL,IAAMsB,EAAcC,GAAWvB,GAC/BwB,GAAUC,QAAQH,GAClBL,EAAU5D,WAEXqE,MAAMC,IACNC,SAAQ,WACPR,IAAc,EAAOD,SAlGrBU,EAAe,IAAInE,EAAc,4BAsGvC,SAA2BJ,EAAO0B,EAAUmC,GAC1C7D,EAAMoD,iBACNU,IAAc,EAAMD,GACpBR,EAAImB,aAAa,CACftK,KAAMwH,EAASF,SACfG,MAAOD,EAASD,SAEflF,MAAK,SAAAkI,GACJf,EAASgB,YAAYD,GACrBF,EAAaxE,WAEdqE,MAAMC,IACNC,SAAQ,WACPR,IAAc,EAAOD,SAlHrBc,EAAc,IAAIvE,EAAc,2BAsHtC,SAA0BJ,EAA1B,EAAyC6D,GAAY,IAAnBzJ,EAAmB,EAAnBA,KAChC4F,EAAMoD,iBACNU,IAAc,EAAMD,GACpBR,EAAIuB,eAAexK,GAChBmC,MAAK,SAAC7C,GACLgK,EAASgB,YAAYhL,GACrBiL,EAAY5E,WAEbqE,MAAMC,IACNC,SAAQ,WACPR,IAAc,EAAOD,SA/HrBgB,EAAa,IAAIhE,EAAe,qBAChCiE,EAAe,IAAI9B,EAAiB,uBAEpC+B,EAAgBpB,EAAUqB,iBAC1BC,EAAmBV,EAAaS,iBAChCE,EAAkBP,EAAYK,iBAE9BG,EAAoBzI,SAASpB,cAAc,yBAC3C8J,EAAmB1I,SAASpB,cAAc,wBAC1C+J,EAAgB3I,SAASpB,cAAc,qBAEvCwB,EAAW,CACfwI,aAAc,eACdrI,cAAe,gBACfE,qBAAsB,sBACtBE,oBAAqB,8BACrBE,gBAAiB,0BACjBE,WAAY,wBAGR8H,EAAoB,IAAI1I,EAAcC,EAAUiI,GAChDS,EAAuB,IAAI3I,EAAcC,EAAUmI,GACnDQ,EAAsB,IAAI5I,EAAcC,EAAUoI,GAGlDQ,EAAmBT,EAAiB3J,cAAc,2BAClDqK,GAAqBV,EAAiB3J,cAAc,6BAEpD4I,GAAY,IAAInF,EAAQ,CAC5BE,SAAU,SAACI,GACT,IAAM2E,EAAcC,GAAW5E,GAC/B6E,GAAU0B,eAAe5B,KAE1B,gBAIH,SAASK,GAAYwB,GACnBC,QAAQC,IAAIF,GAGd,SAASjM,GAAgB8I,GACvBmC,EAAWmB,KAAKtD,GAGlB,SAAS7I,GAAmB2C,GAC1BsI,EAAakB,MAAK,WAChB3C,EAAI4C,WAAWzJ,EAAK0J,SACjB3J,MAAK,WACJuI,EAAa/E,QACbvD,EAAK2J,YAEN/B,MAAMC,OAIb,SAASvK,GAAgB0C,GACvB,IAAMsC,EAAKtC,EAAK0J,QAChB,OAAK1J,EAAKT,UAIHsH,EAAI+C,eAAetH,GAHjBuE,EAAIgD,YAAYvH,GAM3B,SAASmF,GAAWvB,GAClB,IAAM4D,EAAO5C,EAAS6C,YACtB,OAAO,IAAIC,EAAK,CACd9M,KAAMgJ,EACN/I,iBA7CqB,iBA8CrBC,gBAAiBA,GACjBC,mBAAoBA,GACpBC,gBAAiBA,GACjBC,cAAeuM,IACdG,SAGL,SAAS3C,GAAc4C,EAAWC,GAE9BA,EAAO9K,YADL6K,EACmB,gBAEA,YAkDzB,SAASE,GAAYC,GACnBA,EAAcC,gBACdD,EAAcE,gBAuBhB3B,EAAiB3I,iBAAiB,SApBlC,WACEmK,GAAYrB,GACZ5B,EAAUqC,UAmBZb,EAAkB1I,iBAAiB,SAXnC,WACE,IAAMiF,EAAWgC,EAASF,cAE1BkC,EAAiB9E,MAAQc,EAASF,SAClCmE,GAAmB/E,MAAQc,EAASD,OAEpCmF,GAAYpB,GACZjB,EAAayB,UAKfX,EAAc5I,iBAAiB,SAjB/B,WACEmK,GAAYnB,GACZd,EAAYqB,UAiBdT,EAAkByB,mBAClBxB,EAAqBwB,mBACrBvB,EAAoBuB,mBAEpBrD,EAAUsD,oBACV1C,EAAa0C,oBACbtC,EAAYsC,oBACZpC,EAAWoC,oBACXnC,EAAamC,oBAEbnE,QAAQoE,IAAI3D,GACThH,MAAK,YAA8B,I,IAAA,G,EAAA,E,4CAAA,I,owBAA5BmF,EAA4B,KAAlByF,EAAkB,KAClCzD,EAASgB,YAAYhD,GACrBwC,GAAUkD,YAAYD,MAEvB/C,MAAMC,K","file":"main.js","sourcesContent":["class Card {\r\n  constructor({data, templateSelector, handleCardClick, handleRemoveButton, makeLikeRequest, currentUserId}) {\r\n    this._name = data.name;\r\n    this._link = data.link;\r\n    this._ownerId = data.owner._id;\r\n    this._id = data._id;\r\n    this._likes = Array.from(data.likes);\r\n\r\n    this._templateSelector = templateSelector;\r\n    this._handleCardClick = handleCardClick;\r\n    this._handleRemoveButton = handleRemoveButton;\r\n    this._makeLikeRequest = makeLikeRequest;\r\n    this._currentUserId = currentUserId;\r\n    \r\n    this._handleCardLike = this._handleCardLike.bind(this);\r\n  }\r\n  \r\n  create() {\r\n    this._element = this._getTemplate();\r\n    this._title = this._element.querySelector('.card__title');\r\n    this._image = this._element.querySelector('.card__image');\r\n    this._like = this._element.querySelector('.card__like');\r\n    this._likeCounter = this._element.querySelector('.card__like-counter');\r\n    this._removeButton = this._element.querySelector('.card__remove');\r\n\r\n    this._image.src = this._link;\r\n    this._image.alt = this._name;\r\n    this._title.textContent = this._name;\r\n    this._likeCounter.textContent = this._likes.length;\r\n\r\n    if (this.isLiked()) {\r\n      this._like.classList.add('card__like_active');\r\n    }\r\n\r\n    if (this._ownerId !== this._currentUserId) {\r\n      this._deleteRemoveButton();\r\n    }\r\n\r\n    this._setEventListeners();\r\n\r\n    return this._element;\r\n  }\r\n\r\n  delete() {\r\n    this._element.remove();\r\n  }\r\n\r\n  getId() {\r\n    return this._id;\r\n  }\r\n\r\n  isLiked() {\r\n    return this._likes.some(user => user._id === this._currentUserId);\r\n  }\r\n\r\n  _handleCardLike() {\r\n    this._makeLikeRequest(this)\r\n      .then((card) => {\r\n        this._likes = card.likes;\r\n        this._likeCounter.textContent = this._likes.length;\r\n        if (this.isLiked()) {\r\n          this._like.classList.add('card__like_active');\r\n        } else {\r\n          this._like.classList.remove('card__like_active');\r\n        }\r\n      });\r\n  }\r\n\r\n  _deleteRemoveButton() {\r\n    this._removeButton.remove();\r\n  }\r\n\r\n  _setEventListeners() {\r\n    this._image.addEventListener('click', () => this._handleCardClick({\r\n      name: this._name,\r\n      link: this._link\r\n    }));\r\n    this._like.addEventListener('click', this._handleCardLike.bind(this));\r\n    this._removeButton.addEventListener('click', () => this._handleRemoveButton(this));\r\n  }\r\n\r\n  _getTemplate() {\r\n    const cardElement = document\r\n      .querySelector(this._templateSelector)\r\n      .content\r\n      .querySelector('.card')\r\n      .cloneNode(true);\r\n\r\n    return cardElement;\r\n  }  \r\n}\r\n\r\nexport default Card;","export default class FormValidator {\r\n  constructor(settings, form) {\r\n    this._inputSelector = settings.inputSelector;\r\n    this._submitButtonSelector = settings.submitButtonSelector;\r\n    this._inactiveButtonClass = settings.inactiveButtonClass;\r\n    this._inputErrorClass = settings.inputErrorClass;\r\n    this._errorClass = settings.errorClass;\r\n    this._form = form;\r\n    this._inputList = Array.from(this._form.querySelectorAll(this._inputSelector));\r\n    this._buttonElement = this._form.querySelector(this._submitButtonSelector);\r\n  }\r\n\r\n  enableValidation() {\r\n    this._setEventListeners();\r\n  }\r\n\r\n  disableButton(buttonElement) {\r\n    this._buttonElement.classList.add(this._inactiveButtonClass);\r\n    this._buttonElement.disabled = true;\r\n  }\r\n  \r\n  prepareInputs(inputList) {\r\n    this._inputList.forEach((inputElement) => this._hideInputError(inputElement));\r\n  }\r\n\r\n  _setEventListeners() {\r\n    this._inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener('input', () => {\r\n        this._checkInputValidity(inputElement);\r\n        this._toggleButtonState();\r\n      });\r\n    });\r\n  }\r\n\r\n  _checkInputValidity(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      this._showInputError(inputElement, inputElement.validationMessage);\r\n    } else {\r\n      this._hideInputError(inputElement);\r\n    }\r\n  };\r\n  \r\n  _hasInvalidInput() {\r\n    return this._inputList.some(input => !input.validity.valid);\r\n  };\r\n  \r\n  _toggleButtonState() {\r\n    if (this._hasInvalidInput()) {\r\n      this._buttonElement.classList.add(this._inactiveButtonClass);\r\n      this._buttonElement.disabled = true;\r\n    } else {\r\n      this._buttonElement.classList.remove(this._inactiveButtonClass);\r\n      this._buttonElement.disabled = false;\r\n    } \r\n  };\r\n\r\n  _showInputError(inputElement, errorMessage) {\r\n    const errorElement = this._form.querySelector(`.${inputElement.id}-error`);\r\n  \r\n    inputElement.classList.add(this._inputErrorClass);\r\n    errorElement.textContent = errorMessage;\r\n  };\r\n  \r\n  _hideInputError(inputElement) {\r\n    const errorElement = this._form.querySelector(`.${inputElement.id}-error`);\r\n    \r\n    inputElement.classList.remove(this._inputErrorClass);\r\n    errorElement.textContent = '';\r\n  }\r\n}","export default class Section {\r\n  constructor({renderer,}, containerSelector) {\r\n    this._renderer = renderer;\r\n    this._container = document.querySelector(containerSelector);\r\n  }\r\n\r\n  renderItems(items) {\r\n    items.forEach(item => {\r\n      this._renderer(item);\r\n    });\r\n  }\r\n\r\n  addInitialItem(item) {\r\n    this._container.append(item);\r\n  }\r\n\r\n  addItem(item) {\r\n    this._container.prepend(item);\r\n  }\r\n}","export default class Popup {\r\n  constructor(popupSelector) {\r\n    this._popup = document.querySelector(popupSelector);\r\n    this._closeButton = this._popup.querySelector('.popup__close-button');\r\n    this._handleEscClose = this._handleEscClose.bind(this);\r\n    this._handleOverlayClick = this._handleOverlayClick.bind(this);\r\n  }\r\n\r\n  open() {\r\n    this._popup.classList.add('popup_opened');\r\n    this._popup.addEventListener('click', this._handleOverlayClick);\r\n    document.addEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  close() {\r\n    this._popup.classList.remove('popup_opened');\r\n    this._popup.removeEventListener('click', this._handleOverlayClick);\r\n    document.removeEventListener('keydown', this._handleEscClose);\r\n  }\r\n  \r\n  setEventListeners() {\r\n    this._closeButton.addEventListener('click', () => this.close());\r\n  }\r\n\r\n  _handleEscClose(event) {\r\n    if (event.key === 'Escape') this.close();\r\n  }\r\n\r\n  _handleOverlayClick(event) {\r\n    if(event.target.classList.contains('popup')) this.close();\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popupSelector, handleFormSubmit) {\r\n    super(popupSelector);\r\n    this._handleFormSubmit = handleFormSubmit.bind(this);\r\n    this._form = this._popup.querySelector('.popup__form');\r\n    this._inputs = this._form.querySelectorAll('input');\r\n    this._saveButton = this._form.querySelector('.popup__save-button');\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener('submit', (event) => this._handleFormSubmit(event, this._getInputValues(), this._saveButton));\r\n  }\r\n\r\n  close() {\r\n    super.close();\r\n    this._form.reset();\r\n  }\r\n\r\n  getFormElement() {\r\n    return this._form;\r\n  }\r\n\r\n  _getInputValues() {\r\n    const values = {};\r\n    this._inputs.forEach(input => values[input.name] = input.value);\r\n\r\n    return values;\r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    this._popupImage = this._popup.querySelector('.popup__image');\r\n    this._imageCaption = this._popup.querySelector('.popup__caption');\r\n  }\r\n\r\n  open(imageData) {\r\n    this._popupImage.src = imageData.link;\r\n    this._popupImage.alt = imageData.name;\r\n    this._imageCaption.textContent = imageData.name;\r\n    super.open();\r\n  }\r\n}","export default class UserInfo {\r\n  constructor({usernameSelector, statusSelector, avatarSelector}) {\r\n    this._usernameElement = document.querySelector(usernameSelector);\r\n    this._statusElement = document.querySelector(statusSelector);\r\n    this._avatar = document.querySelector(avatarSelector);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return {\r\n      username: this._usernameElement.textContent,\r\n      status: this._statusElement.textContent,\r\n    };\r\n  }\r\n\r\n  getUserId() {\r\n    return this._id;\r\n  }\r\n\r\n  setUserInfo(userData) {\r\n    this._id = userData._id;\r\n    this._usernameElement.textContent = userData.name;\r\n    this._statusElement.textContent = userData.about;\r\n    this.setUserAvatar(userData.avatar);\r\n  }\r\n\r\n  setUserAvatar(link) {\r\n    this._avatar.src = link;\r\n  }\r\n}","export class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: this._headers\r\n    })\r\n      .then(this._checkResponse);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers\r\n    })\r\n      .then(this._checkResponse);\r\n  }\r\n\r\n  editUserInfo(userData) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: userData.name,\r\n        about: userData.about\r\n      })\r\n    })\r\n      .then(this._checkResponse);\r\n  }\r\n\r\n  editUserAvatar(link) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: link\r\n      })\r\n    })\r\n      .then(this._checkResponse);\r\n  }\r\n\r\n  addCard(cardData) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: cardData.name,\r\n        link: cardData.link\r\n      })\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  addCardLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  deleteCardLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n    .then(this._checkResponse);\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    \r\n    return Promise.reject(`Ошибка: ${res.status}`); \r\n  }\r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithConfirm extends Popup {\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    this._confirmButton = document.querySelector('.popup__confirm-button');\r\n  }\r\n\r\n  open(handleDelete) {\r\n    this._handleDelete = handleDelete;\r\n    super.open();\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n\r\n    this._confirmButton.addEventListener('click', (event) => {\r\n      event.preventDefault();\r\n      this._handleDelete();\r\n    })\r\n  }\r\n}","import Card from '../scripts/components/Card.js';\nimport FormValidator from '../scripts/components/FormValidator.js';\nimport Section from '../scripts/components/Section.js';\nimport PopupWithForm from '../scripts/components/PopupWithForm.js';\nimport PopupWithImage from '../scripts/components/PopupWithImage.js';\nimport UserInfo from '../scripts/components/UserInfo.js';\nimport './index.css';\nimport { Api } from '../scripts/components/Api.js';\nimport PopupWithConfirm from '../scripts/components/PopupWithConfirm.js';\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\n  headers: {\n    authorization: '61dd454c-d1c5-452b-8062-22ed0eb542c2',\n    'Content-Type': 'application/json'\n  }\n});\n\nconst initialPromises = [api.getUserInfo(), api.getInitialCards()];\n\nconst userInfo = new UserInfo({\n  usernameSelector: '.profile__name',\n  statusSelector: '.profile__status',\n  avatarSelector: '.profile__avatar'\n});\n\nconst cardPopup = new PopupWithForm('.popup_type_new-card', handleCardForm);\nconst profilePopup = new PopupWithForm('.popup_type_edit-profile', handleProfileForm);\nconst avatarPopup = new PopupWithForm('.popup_type_edit-avatar', handleAvatarForm);\nconst imagePopup = new PopupWithImage('.popup_type_image');\nconst confirmPopup = new PopupWithConfirm('.popup_type_confirm');\n\nconst cardPopupForm = cardPopup.getFormElement();\nconst profilePopupForm = profilePopup.getFormElement();\nconst avatarPopupForm = avatarPopup.getFormElement();\n\nconst profileEditButton = document.querySelector('.profile__edit-button');\nconst profileAddButton = document.querySelector('.profile__add-button');\nconst profileAvatar = document.querySelector('.profile__overlay');\n\nconst settings = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__save-button',\n  inactiveButtonClass: 'popup__save-button_inactive',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible'\n};\n\nconst cardFormValidator = new FormValidator(settings, cardPopupForm);\nconst profileFormValidator = new FormValidator(settings, profilePopupForm);\nconst avatarFormValidator = new FormValidator(settings, avatarPopupForm);\n\nconst templateSelector = '#card-template';\nconst profileNameInput = profilePopupForm.querySelector('.popup__input_type_name');\nconst profileStatusInput = profilePopupForm.querySelector('.popup__input_type_status');\n\nconst cardsList = new Section({\n  renderer: (item) => {\n    const cardElement = createCard(item);\n    cardsList.addInitialItem(cardElement);\n  }, \n}, '.cards__list');\n\n\n\nfunction handleError(err) {\n  console.log(err);\n}\n\nfunction handleCardClick(cardData) {\n  imagePopup.open(cardData);\n}\n\nfunction handleRemoveButton(card) {\n  confirmPopup.open(() => {\n    api.deleteCard(card.getId())\n      .then(() => {\n        confirmPopup.close();\n        card.delete();\n      })\n      .catch(handleError);   \n  });\n}\n\nfunction makeLikeRequest(card) {\n  const id = card.getId();\n  if (!card.isLiked()) {\n    return api.addCardLike(id);\n  } \n\n  return api.deleteCardLike(id);\n}\n\nfunction createCard(cardData) {\n  const myId = userInfo.getUserId();\n  return new Card({\n    data: cardData, \n    templateSelector: templateSelector, \n    handleCardClick: handleCardClick, \n    handleRemoveButton: handleRemoveButton, \n    makeLikeRequest: makeLikeRequest, \n    currentUserId: myId\n  }).create();\n}\n\nfunction renderLoading(isLoading, button) {\n  if (isLoading) {\n    button.textContent = 'Сохранение...';\n  } else {\n    button.textContent = 'Сохранить';\n  }\n}\n\nfunction handleCardForm(event, formValues, saveButton) {\n  event.preventDefault();\n  renderLoading(true, saveButton);\n  api.addCard(formValues)\n    .then((cardData) => {\n      const cardElement = createCard(cardData);\n      cardsList.addItem(cardElement);\n      cardPopup.close();\n    })\n    .catch(handleError)\n    .finally(() => {\n      renderLoading(false, saveButton);\n    })\n}\n\nfunction handleProfileForm(event, userData, saveButton) {\n  event.preventDefault();\n  renderLoading(true, saveButton);\n  api.editUserInfo({\n    name: userData.username,\n    about: userData.status,\n  })\n    .then(responseData => {\n      userInfo.setUserInfo(responseData);\n      profilePopup.close();\n    })\n    .catch(handleError)\n    .finally(() => {\n      renderLoading(false, saveButton);\n    })\n}\n\nfunction handleAvatarForm(event, {link}, saveButton) {\n  event.preventDefault();\n  renderLoading(true, saveButton);\n  api.editUserAvatar(link)\n    .then((data) => {\n      userInfo.setUserInfo(data);\n      avatarPopup.close();\n    })\n    .catch(handleError)\n    .finally(() => {\n      renderLoading(false, saveButton);\n    });\n}\n\nfunction prepareForm(formValidator) {\n  formValidator.prepareInputs();\n  formValidator.disableButton();\n}\n\nfunction handleCardPopupOpening() {\n  prepareForm(cardFormValidator);\n  cardPopup.open();\n}\n\nfunction handleAvatarPopupOpening() {\n  prepareForm(avatarFormValidator);\n  avatarPopup.open();\n}\n\nfunction handleProfilePopupOpening() {\n  const userData = userInfo.getUserInfo();\n\n  profileNameInput.value = userData.username;\n  profileStatusInput.value = userData.status;\n\n  prepareForm(profileFormValidator);\n  profilePopup.open();\n}\n\nprofileAddButton.addEventListener('click', handleCardPopupOpening);\nprofileEditButton.addEventListener('click', handleProfilePopupOpening);\nprofileAvatar.addEventListener('click', handleAvatarPopupOpening);\n\ncardFormValidator.enableValidation();\nprofileFormValidator.enableValidation();\navatarFormValidator.enableValidation();\n\ncardPopup.setEventListeners();\nprofilePopup.setEventListeners();\navatarPopup.setEventListeners();\nimagePopup.setEventListeners();\nconfirmPopup.setEventListeners();\n\nPromise.all(initialPromises)\n  .then(([userData, initialCards]) => {\n    userInfo.setUserInfo(userData);\n    cardsList.renderItems(initialCards);\n  })\n  .catch(handleError);\n\n"],"sourceRoot":""}